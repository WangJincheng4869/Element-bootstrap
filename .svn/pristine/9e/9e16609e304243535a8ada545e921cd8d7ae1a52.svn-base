(function ($) {
  let constants = {
      classes: {
        zoomInTopLeaveActive: 'el-zoom-in-top-leave-active',
        zoomInTopEnter: 'el-zoom-in-top-enter',
        zoomInTopEnterActive: 'el-zoom-in-top-enter-active',
        isFocus: 'is-focus',
        cascader: 'cascader',
        elPopper: 'el-popper',
        popperArrow: 'popper__arrow',
        activePath: 'in-active-path',
        active: 'is-active',
        d_block: 'd-block',
      },

      defaultAttrs: {
        'type': 'text',
        'autocomplete': 'off',
        'readonly': 'readonly'
      },
      html: {
        toast: function (options) {
          return '' +
            '<div class="toast" role="alert" aria-live="assertive" aria-atomic="true">' +
            '  <div class="toast-header">' +
            '    <strong class="mr-auto">' + options.title + '</strong>' +
            '    <small class="text-muted">' + options.subtitle + '</small>' +
            '    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
            '  </div>' +
            '  <div class="toast-body">' + options.content + '</div>' +
            '</div>'
        }
      }
    },
    defaults = {
      // 自动隐藏的时间
      delay: 500,
      // 标题
      title: '',
      // 副标题
      subtitle: '',
      // 内容
      content: '',
      onClick: function (event, treeId, treeNode) {
      }
    };

  $.fn.extend({
    'notify': function (options) {
      if ($('.toast-box').length <= 0) {
        $('body').append('<div class="toast-box" aria-live="polite" aria-atomic="true"></div>')
      }
      if (typeof options !== 'object') return this;
      let classes = constants.classes,
        html = constants.html, config = $.extend({}, defaults, options);
      $('body > .toast-box').append(html.toast(options));
      let $toast = $('.toast');
      $toast.toast({
        delay: config.delay
      }).toast('show');
      setTimeout(function () {
        $toast.remove()
      }, config.delay + 400);

      $toast.on('hidden.bs.toast', function () {
        $(this).remove();
      });
    }
  });

})(jQuery);